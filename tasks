#!/bin/bash

SYMLINKS=".bash_profile .bashrc .bash_profile.d .bashrc.d .aliases.d"

test() {
    create_symlinks
    env -i \
        TERM=xterm \
        PATH=$PATH \
        HOME=$HOME \
    /bin/bash --rcfile .bash_profile
}

create_symlinks() {
    for symlink in $SYMLINKS; do
        target=${symlink:1}
        [ ! -L $symlink ] && [ -e $target ] && ln -s $target $symlink
    done
}

delete_symlinks() {
    for symlink in $SYMLINKS; do
        [ -L $symlink ] && rm $symlink
    done
}

if [ -n "$1" ]; then
    $1
else
    test
fi